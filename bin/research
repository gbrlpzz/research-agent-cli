#!/bin/bash
# Research CLI - paper discovery and citation management

REPO_ROOT="$HOME/Documents/GitHub/research-agent-cli"
VENV="$REPO_ROOT/.venv"
PYTHON="$VENV/bin/python"

# Show usage if no args
if [ -z "$1" ]; then
    echo "Usage:"
    echo "  research <query>        Search Semantic Scholar and add papers"
    echo "  research exa <query>    Search with Exa.ai (semantic search, costs credits)"
    echo "  research add [id]       Quick add from DOI/arXiv (or clipboard)"
    echo "  research cite [query]   Search library and copy citation keys"
    echo "  research open [query]   Search library and open paper in browser"
    echo ""
    echo "Examples:"
    echo "  research \"attention mechanism\"    # Find papers about attention"
    echo "  research exa \"reasoning in LLMs\"  # Semantic search with Exa.ai"
    echo "  research add 10.1234/example      # Add paper by DOI"
    echo "  research add 2301.00001           # Add paper by arXiv ID"
    echo "  research add                      # Add from clipboard"
    echo "  research cite                     # Browse all citations"
    echo "  research cite egger               # Find citations by Egger"
    echo "  research open attention           # Open attention paper in browser"
    exit 0
fi

# Handle subcommands
case "$1" in
    exa)
        shift
        "$PYTHON" "$REPO_ROOT/scripts/exa_search.py" "$@"
        ;;
    add)
        shift
        "$PYTHON" "$REPO_ROOT/scripts/add.py" "$@"
        ;;
    cite)
        shift
        "$PYTHON" "$REPO_ROOT/scripts/cite.py" "$@"
        ;;
    open)
        shift
        "$PYTHON" "$REPO_ROOT/scripts/open.py" "$@"
        ;;
    *)
        # Default: search papers
        "$PYTHON" "$REPO_ROOT/scripts/discover.py" "$@"
        ;;
esac
